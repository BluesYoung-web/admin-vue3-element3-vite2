import"core-js/modules/es.promise.js";function asyncGeneratorStep(e,n,t,r,i,a,o){try{var u=e[a](o),l=u.value}catch(c){return void t(c)}u.done?n(l):Promise.resolve(l).then(r,i)}function _asyncToGenerator(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){asyncGeneratorStep(a,r,i,o,u,"next",e)}function u(e){asyncGeneratorStep(a,r,i,o,u,"throw",e)}o(void 0)}))}}var __vite_style__=document.createElement("style");__vite_style__.innerHTML=".upload[data-v-6e5f80a4]{width:300px}.img[data-v-6e5f80a4]{width:50px;height:50px;margin-right:5px;margin-top:5px}.contextmenu[data-v-6e5f80a4]{margin:0;background:#fff;z-index:3000;position:absolute;list-style-type:none;padding:0;border-radius:4px;font-size:12px;font-weight:400;color:#333;box-shadow:2px 2px 3px 0 rgba(0,0,0,.3)}.contextmenu li[data-v-6e5f80a4]{margin:0;padding:0;color:red;cursor:pointer}.contextmenu li[data-v-6e5f80a4]:hover{background:#eee}",document.head.appendChild(__vite_style__),System.register(["./index-legacy.f5eb69d1.js","./vendor-legacy.92131c39.js"],(function(e){"use strict";var n,t,r,i,a,o,u,l,c,s,d,p,m,f,g,v,y,h,x,_,b;return{setters:[function(e){n=e.d,t=e.r,r=e.s,i=e.u,a=e.Q,o=e.p,u=e.k,l=e.a,c=e.b,s=e.e,d=e.g,p=e.q,m=e.h,f=e.i,g=e.F,v=e.f,y=e.v,h=e.x,x=e.y,_=e.l,b=e.z},function(){}],execute:function(){var k=n({name:"YoungImgUpload",props:{limit:{type:Number,default:10},comTask:{type:Object,default:function(){return{}}},imgs:{type:Object,required:!0},showUpload:{type:Boolean,default:!0}},emits:["update:imgs","did"],setup:function(e,n){var o=n.emit,u=t(!1),l=t(!1),c=t(0),s=t(0),d="",p=t(null),m=[],f=function(){return l.value=!1};r((function(){return l.value}),(function(e){e?document.body.addEventListener("click",f):document.body.removeEventListener("click",f)}));var g=function(n){var t,r=null!=(t=n.target.files)?t:[];e.imgs.length+r.length>e.limit?a.warning("最多只能上传"+e.limit+"张"):o("update:imgs",e.imgs.concat(Array.from(r).map((function(e){return m.push(e),URL.createObjectURL(e)}))))};return{addedListener:u,visible:l,top:c,left:s,toBeDel:d,imgRef:p,choseImg:function(){!u.value&&p.value.addEventListener("change",g)&&(u.value=!0),p.value.click()},openMenu:function(e,n){d=n;s.value=e.clientX-105-120,c.value=e.clientY,l.value=!0},del:function(){var n=e.imgs.indexOf(d);m.splice(n,1),e.imgs.splice(n,1),o("update:imgs",e.imgs),l.value=!1},uploadHandler:function(){var n=_asyncToGenerator(regeneratorRuntime.mark((function n(){var t,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new FormData,m.forEach((function(e,n){return t.append("img"+n,e)})),n.next=4,i(e.comTask,t);case 4:r=n.sent,o("did",r);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}}}),w=_("data-v-6e5f80a4");o("data-v-6e5f80a4");var C={class:"upload"},U=p("上传");u();var j=w((function(e,n,t,r,i,a){var o=l("el-button"),u=l("el-image");return c(),s("div",C,[d("input",{ref:"imgRef",type:"file",name:"img",multiple:e.limit>1,hidden:""},null,8,["multiple"]),d("div",null,[e.showUpload?(c(),s(o,{key:0,type:"primary",icon:"el-icon-picture",disabled:e.imgs.length>=10,onClick:e.choseImg},{default:w((function(){return[p(" 点击选取图片（不超过"+m(e.limit)+"张） ",1)]})),_:1},8,["disabled","onClick"])):f("",!0),d(o,{type:"success",icon:"el-icon-upload",onClick:e.uploadHandler},{default:w((function(){return[U]})),_:1},8,["onClick"])]),(c(!0),s(g,null,v(e.imgs,(function(n,t){return c(),s(u,{key:n+"9527"+t,src:n,"preview-src-list":e.imgs,lazy:"",class:"img",onContextmenu:y((function(t){return e.openMenu(t,n)}),["prevent"])},null,8,["src","preview-src-list","onContextmenu"])})),128)),h(d("ul",{style:{left:e.left+"px",top:e.top+"px"},class:"contextmenu"},[d("li",{onClick:n[1]||(n[1]=function(){return e.del&&e.del.apply(e,arguments)})},"删除")],4),[[x,e.visible]])])}));k.render=j,k.__scopeId="data-v-6e5f80a4",e("default",n({name:"ImgUpload",components:{YoungImgUpload:k},setup:function(){for(var e=t([]),n=t([]),r=0;r<100;r++)n.value.push({top:100+Math.floor(600*Math.random()),start:1700+Math.floor(3e3*Math.random()),color:"gray"});return{danmus:n,imgs:e}}})).render=function(e,n,t,r,i,a){var o=l("young-img-upload"),u=b("pin");return c(),s(g,null,[(c(!0),s(g,null,v(e.danmus,(function(e,n){return c(),s("div",{key:n},[h(d("h1",null,"来了老弟"+m(n),513),[[u,e]])])})),128)),d(o,{imgs:e.imgs,"onUpdate:imgs":n[1]||(n[1]=function(n){return e.imgs=n})},null,8,["imgs"])],64)}}}}));
