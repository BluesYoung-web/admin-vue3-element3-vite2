import"core-js/modules/es.promise.js";function asyncGeneratorStep(e,n,t,i,r,o,a){try{var u=e[o](a),l=u.value}catch(c){return void t(c)}u.done?n(l):Promise.resolve(l).then(i,r)}function _asyncToGenerator(e){return function(){var n=this,t=arguments;return new Promise((function(i,r){var o=e.apply(n,t);function a(e){asyncGeneratorStep(o,i,r,a,u,"next",e)}function u(e){asyncGeneratorStep(o,i,r,a,u,"throw",e)}a(void 0)}))}}var __vite_style__=document.createElement("style");__vite_style__.innerHTML=".upload[data-v-d0269bc2]{width:300px}.img[data-v-d0269bc2]{width:50px;height:50px;margin-right:5px;margin-top:5px}.contextmenu[data-v-d0269bc2]{margin:0;background:#fff;z-index:3000;position:absolute;list-style-type:none;padding:0;border-radius:4px;font-size:12px;font-weight:400;color:#333;box-shadow:2px 2px 3px 0 rgba(0,0,0,.3)}.contextmenu li[data-v-d0269bc2]{margin:0;padding:0;color:red;cursor:pointer}.contextmenu li[data-v-d0269bc2]:hover{background:#eee}",document.head.appendChild(__vite_style__),System.register(["./index-legacy.7f630cad.js","./vendor-legacy.68531bbe.js"],(function(e){"use strict";var n,t,i,r,o,a,u,l,c,s,d,p,m,f,g,v,y,h,b,x,_;return{setters:[function(e){n=e.e,t=e.r,i=e.j,r=e.k,o=e.v,a=e.p,u=e.a,l=e.f,c=e.o,s=e.c,d=e.l,p=e.b,m=e.i,f=e.t,g=e.F,v=e.m,y=e.w,h=e.h,b=e.n,x=e.d,_=e.g},function(){}],execute:function(){var k=n({name:"YoungImgUpload",props:{limit:{type:Number,default:10},comTask:{type:Object,default:function(){return{}}},imgs:{type:Object,required:!0},showUpload:{type:Boolean,default:!0}},emits:["update:imgs","did"],setup:function(e,n){var a=n.emit,u=t(!1),l=t(!1),c=t(0),s=t(0),d="",p=t(null),m=[],f=function(){return l.value=!1};i((function(){l.value?document.body.addEventListener("click",f):document.body.removeEventListener("click",f)}));var g=function(n){var t,i=null!=(t=n.target.files)?t:[];e.imgs.length+i.length>e.limit?o.warning("最多只能上传"+e.limit+"张"):a("update:imgs",e.imgs.concat(Array.from(i).map((function(e){return m.push(e),URL.createObjectURL(e)}))))};return{addedListener:u,visible:l,top:c,left:s,toBeDel:d,imgRef:p,choseImg:function(){!u.value&&p.value.addEventListener("change",g)&&(u.value=!0),p.value.click()},openMenu:function(e,n){d=n;s.value=e.clientX-105-120,c.value=e.clientY,l.value=!0},del:function(){var n=e.imgs.indexOf(d);m.splice(n,1),e.imgs.splice(n,1),a("update:imgs",e.imgs),l.value=!1},uploadHandler:function(){var n=_asyncToGenerator(regeneratorRuntime.mark((function n(){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new FormData,m.forEach((function(e,n){return t.append("img"+n,e)})),n.next=4,r(e.comTask,t);case 4:i=n.sent,a("did",i);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}}}),w=x();a("data-v-d0269bc2");var j={class:"upload"},C=m("上传");u();var U=w((function(e,n,t,i,r,o){var a=l("el-button"),u=l("el-image");return c(),s(g,null,[d(" 图片上传组件 "),p("div",j,[p("input",{ref:"imgRef",type:"file",name:"img",multiple:e.limit>1,hidden:""},null,8,["multiple"]),p("div",null,[e.showUpload?(c(),s(a,{key:0,type:"primary",icon:"el-icon-picture",disabled:e.imgs.length>=10,onClick:e.choseImg},{default:w((function(){return[m(" 点击选取图片（不超过"+f(e.limit)+"张） ",1)]})),_:1},8,["disabled","onClick"])):d("v-if",!0),p(a,{type:"success",icon:"el-icon-upload",onClick:e.uploadHandler},{default:w((function(){return[C]})),_:1},8,["onClick"])]),(c(!0),s(g,null,v(e.imgs,(function(n,t){return c(),s(u,{key:n+"9527"+t,src:n,"preview-src-list":e.imgs,lazy:"",class:"img",onContextmenu:y((function(t){return e.openMenu(t,n)}),["prevent"])},null,8,["src","preview-src-list","onContextmenu"])})),128)),h(p("ul",{style:{left:e.left+"px",top:e.top+"px"},class:"contextmenu"},[p("li",{onClick:n[1]||(n[1]=function(){return e.del&&e.del.apply(e,arguments)})},"删除")],4),[[b,e.visible]])])],2112)}));k.render=U,k.__scopeId="data-v-d0269bc2",e("default",n({name:"ImgUpload",components:{YoungImgUpload:k},setup:function(){for(var e=t([]),n=t([]),i=0;i<10;i++)n.value.push({top:100+Math.floor(600*Math.random()),start:1700+Math.floor(3e3*Math.random()),color:"gray"});return{danmus:n,imgs:e}}})).render=function(e,n,t,i,r,o){var a=l("young-img-upload"),u=_("pin");return c(),s(g,null,[(c(!0),s(g,null,v(e.danmus,(function(e,n){return c(),s("div",{key:n},[h(p("h1",null,"来了老弟",512),[[u,e]])])})),128)),p(a,{imgs:e.imgs,"onUpdate:imgs":n[1]||(n[1]=function(n){return e.imgs=n})},null,8,["imgs"])],64)}}}}));
