import{d as e,f as l,g as a,o as t,c as o,x as i,b as r,l as n,q as u,k as s,h as d,i as c,S as m,X as p,s as f}from"./vendor.10417c21.js";import{u as h}from"./index.835f1048.js";const v={class:"w-300px"},y=u("上传"),g={class:"flex flex-wrap"};var V=e({props:{modelValue:{type:Array,required:!0},showUpload:{type:Boolean,required:!1,default:!0},limit:{type:Number,required:!1,default:10},params:{type:Object,required:!1,default:()=>({})},hideDel:{type:Boolean,required:!1}},emits:["update:modelValue","did"],setup(e,{emit:p}){const f=e,V=l(!1),x=l(null),w=[],k=e=>{var l;const a=null!=(l=e.target.files)?l:[],t=f.modelValue.length;if(t+a.length>f.limit)return p("update:modelValue",f.modelValue.concat(Array.from(a).slice(0,f.limit-t).map((e=>(w.push(e),URL.createObjectURL(e)))))),void m.warning(`最多只能上传${f.limit}张`);p("update:modelValue",f.modelValue.concat(Array.from(a).map((e=>(w.push(e),URL.createObjectURL(e))))))},b=()=>{!V.value&&x.value.addEventListener("change",k)&&(V.value=!0),x.value.click()},U=()=>{return e=this,l=null,a=function*(){const e=new FormData;w.forEach(((l,a)=>e.append("img"+a,l)));const l=yield h(f.params,e);p("did",l)},new Promise(((t,o)=>{var i=e=>{try{n(a.next(e))}catch(l){o(l)}},r=e=>{try{n(a.throw(e))}catch(l){o(l)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,r);n((a=a.apply(e,l)).next())}));var e,l,a};return(l,m)=>{const h=a("el-button"),V=a("el-image");return t(),o(d,null,[i(" 图片上传组件 "),r("div",v,[r("input",{ref:x,type:"file",accept:"image/*",name:"img",multiple:e.limit>1,hidden:""},null,8,["multiple"]),r("div",null,[e.showUpload?(t(),o(h,{key:0,type:"primary",icon:"el-icon-picture",disabled:e.modelValue.length>=10,onClick:b},{default:n((()=>[u(" 点击选取图片（不超过"+s(e.limit)+"张） ",1)])),_:1},8,["disabled"])):i("v-if",!0),r(h,{type:"success",icon:"el-icon-upload",onClick:U},{default:n((()=>[y])),_:1})]),r("div",g,[(t(!0),o(d,null,c(e.modelValue,((l,a)=>(t(),o("div",{key:l+"9527"+a,class:"relative"},[r(V,{src:l,"preview-src-list":e.modelValue,lazy:"",class:"w-50px h-50px mr-5px mt-5px"},null,8,["src","preview-src-list"]),e.hideDel?i("v-if",!0):(t(),o(h,{key:0,icon:"el-icon-delete",type:"danger",circle:"",class:"absolute transform scale-65 right-0",onClick:e=>(e=>{const l=f.modelValue.indexOf(e);w.splice(l,1),f.modelValue.splice(l,1),p("update:modelValue",f.modelValue)})(l)},null,8,["onClick"]))])))),128))])])],2112)}}}),x=e({name:"ImgUpload",components:{YoungImgUpload:V},setup(){let e=l([]),a=l([]);for(let l=0;l<10;l++)a.value.push({top:100+Math.floor(600*Math.random()),start:1700+Math.floor(3e3*Math.random()),color:"gray"});return{danmus:a,imgs:e}}});const w=u("来了老弟");x.render=function(e,l,i,n,u,s){const m=a("young-img-upload"),h=p("pin");return t(),o(d,null,[(t(!0),o(d,null,c(e.danmus,((e,l)=>(t(),o("div",{key:l},[f(r("h1",null,[w],512),[[h,e]])])))),128)),r(m,{modelValue:e.imgs,"onUpdate:modelValue":l[1]||(l[1]=l=>e.imgs=l)},null,8,["modelValue"])],64)};export default x;
