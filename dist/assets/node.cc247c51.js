var e=(e,l,a)=>new Promise(((o,d)=>{var t=e=>{try{s(a.next(e))}catch(l){d(l)}},n=e=>{try{s(a.throw(e))}catch(l){d(l)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(t,n);s((a=a.apply(e,l)).next())}));import{e as l,_ as a,r as o,n as d,x as t,y as n,Q as s,f as u,o as i,c as r,b as m,s as p,l as _,i as c}from"./index.a2771e95.js";import{g as f,d as h,a as v,e as b}from"./system.0db79074.js";import"./vendor.7f0cd297.js";var w=l({name:"Node",components:{YoungDialog:a},setup(){let l=o(!1),a=o(!1);const u=o({autoid:0,node_name:"",node_desc:"",node_path:"",node_sort:0,is_show:1,parent_id:0});let i=o([]);const r=()=>e(this,null,(function*(){const e=yield f();i.value=t(e)}));d((()=>r()));const m=()=>{l.value=!1,a.value=!1,u.value={autoid:0,node_name:"",node_desc:"",node_path:"",node_sort:0,is_show:1,parent_id:0},i.value=[],r()};return{add:e=>{let a=0;"object"==typeof e&&(3===e.node_type&&(u.value.is_show=0),a=e.autoid),u.value.parent_id=a,l.value=!0},edit:l=>e(this,null,(function*(){a.value=!0,u.value=l,u.value.node_id=l.autoid})),del:l=>{n.confirm("确认删除该节点？","提示",{type:"warning"}).then((()=>e(this,null,(function*(){yield h(l.autoid),s.success("节点删除成功！"),r()})))).catch((()=>null))},sure:()=>e(this,null,(function*(){l.value?(yield v(u.value),s.success("节点添加成功！")):a.value&&(yield b(u.value),s.success("节点修改成功！")),m()})),clear:m,form:u,tableData:i,isAdd:l,isEdit:a}}});const V={class:"index"},y={class:"caozuoFat"},C=c("添加一级节点"),x=c("编辑"),k=c("删除"),U=c("添加子节点"),g=c("隐藏"),D=c("显示");w.render=function(e,l,a,o,d,t){const n=u("el-button"),s=u("el-table-column"),c=u("el-switch"),f=u("el-table"),h=u("el-input"),v=u("el-form-item"),b=u("el-radio"),w=u("el-form"),j=u("young-dialog");return i(),r("div",V,[m("div",y,[m(n,{type:"primary",size:"small",plain:"",onClick:l[1]||(l[1]=l=>e.add(0))},{default:p((()=>[C])),_:1})]),_(" 节点列表 "),m(f,{data:e.tableData,style:{width:"100%","margin-bottom":"20px"},"row-key":"autoid","default-expand-all":!1,size:"medium","tree-props":{children:"part",hasChildren:"hasChildren"}},{default:p((()=>[m(s,{prop:"node_name",label:"节点名称",width:"240"}),m(s,{prop:"autoid",label:"ID"}),m(s,{prop:"parent_id",label:"父节点"}),m(s,{prop:"node_path",label:"路径"}),m(s,{prop:"node_desc",label:"节点描述"}),m(s,{prop:"is_show",label:"隐藏/显示"},{default:p((e=>[m(c,{modelValue:e.row.is_show,"onUpdate:modelValue":l=>e.row.is_show=l,"active-value":1,"inactive-value":0,"active-color":"#409EFF","inactive-color":"#909399",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),m(s,{prop:"node_type",label:"节点级别"}),m(s,{label:"操作",width:"300"},{default:p((l=>[m(n,{onClick:a=>e.edit(l.row)},{default:p((()=>[x])),_:2},1032,["onClick"]),m(n,{type:"danger",onClick:a=>e.del(l.row)},{default:p((()=>[k])),_:2},1032,["onClick"]),l.row.node_type<4?(i(),r(n,{key:0,type:"success",plain:"",onClick:a=>e.add(l.row)},{default:p((()=>[U])),_:2},1032,["onClick"])):_("v-if",!0)])),_:1})])),_:1},8,["data"]),_(" 添加 / 编辑 "),m(j,{width:"370px","is-add":e.isAdd,"is-edit":e.isEdit,onSure:e.sure,onClear:e.clear},{body:p((()=>[m(w,{model:e.form,"label-width":"80px"},{default:p((()=>[m(v,{label:"节点名称"},{default:p((()=>[m(h,{modelValue:e.form.node_name,"onUpdate:modelValue":l[2]||(l[2]=l=>e.form.node_name=l)},null,8,["modelValue"])])),_:1}),m(v,{label:"节点描述"},{default:p((()=>[m(h,{modelValue:e.form.node_desc,"onUpdate:modelValue":l[3]||(l[3]=l=>e.form.node_desc=l)},null,8,["modelValue"])])),_:1}),m(v,{label:"节点路径"},{default:p((()=>[m(h,{modelValue:e.form.node_path,"onUpdate:modelValue":l[4]||(l[4]=l=>e.form.node_path=l)},null,8,["modelValue"])])),_:1}),m(v,{label:"排序(升序)"},{default:p((()=>[m(h,{modelValue:e.form.node_sort,"onUpdate:modelValue":l[5]||(l[5]=l=>e.form.node_sort=l),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),m(v,{label:"显示|隐藏"},{default:p((()=>[m(b,{modelValue:e.form.is_show,"onUpdate:modelValue":l[6]||(l[6]=l=>e.form.is_show=l),label:0},{default:p((()=>[g])),_:1},8,["modelValue"]),m(b,{modelValue:e.form.is_show,"onUpdate:modelValue":l[7]||(l[7]=l=>e.form.is_show=l),label:1},{default:p((()=>[D])),_:1},8,["modelValue"])])),_:1}),m(v,{label:"父节点ID"},{default:p((()=>[m(h,{modelValue:e.form.parent_id,"onUpdate:modelValue":l[8]||(l[8]=l=>e.form.parent_id=l),disabled:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["is-add","is-edit","onSure","onClear"])])};export default w;
