var e=(e,l,a)=>new Promise(((o,d)=>{var t=e=>{try{s(a.next(e))}catch(l){d(l)}},i=e=>{try{s(a.throw(e))}catch(l){d(l)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(t,i);s((a=a.apply(e,l)).next())}));import{_ as l,c as a,Q as o}from"./index.e45b9170.js";import{c as d,d as t,f as i,h as s,i as n,j as r}from"./deepClone.89b5146f.js";import{d as u,f as c,o as p,a1 as m,a2 as f,Y as _,W as h,b as v,e as b,k as y,L as V,p as w,a3 as I}from"./vendor.480fa8ef.js";var k=u({name:"Role",components:{YoungDialog:l},setup(){let l=c({autoid:0,role_name:"",role_desc:"",parent_role_id:0,is_enable:1,platform_type:0,role_access:""}),u=c([]),m=c([]),f=c(!1),_=c(!1),h=c(!1);const v=()=>e(this,null,(function*(){const e=yield d();u.value=t(e)}));p((()=>v()));const b=()=>{f.value=!1,_.value=!1,h.value=!1,l.value={autoid:0,role_name:"",role_desc:"",role_access:"",parent_role_id:0,is_enable:1,platform_type:0},u.value=[],v()},y=()=>e(this,null,(function*(){f.value?(yield n(l.value),o.success("角色添加成功！")):(yield r(l.value),o.success("角色修改成功！")),b()})),V=(e,l=!1)=>{0!==e.part.length&&e.part.forEach((a=>{l?a.is_checked?a.is_checked=!0:a.is_checked=!1:e.is_checked?a.is_checked=!0:a.is_checked=!1,V(a,l)}))},w=(e,l)=>{0!==e.length&&e.forEach((e=>{e.is_checked&&l.add(e.autoid),w(e.part,l)}))};return{tableData:u,nodeList:m,formInfo:l,isAddInfo:f,isEditInfo:_,isEditPriority:h,add:()=>e(this,null,(function*(){f.value=!0})),editInfo:e=>{l.value=e,_.value=!0},editPriority:a=>e(this,null,(function*(){const e=yield i(a.autoid);let o=yield e.nodeList;o.forEach((e=>{e.is_checked&&(e.is_checked=!0),V(e,!0)})),m.value=t(o),l.value=a,h.value=!0})),del:l=>{a.confirm("确认删除该角色？","提示",{type:"warning"}).then((()=>e(this,null,(function*(){yield s(l.autoid),o.success("删除成功！"),v()})))).catch((()=>null))},sure:y,clear:b,selectChange:V,surePriority:()=>{const e=new Set;w(m.value,e),l.value.role_access=[...e].join(","),y()}}}});const C=I("data-v-002a6fe6");m("data-v-002a6fe6");const g={class:"index"},U={class:"caozuoFat"},F=V("添加角色"),E=V("信息编辑"),x=V("权限编辑"),P=V("删除"),j={class:"tjglyFat"},D={class:"disF"},S=b("span",null,"角色名称",-1),z={class:"disF"},L=b("span",null,"角色描述",-1),A={class:"disF"},Y=b("span",null,"父级角色id",-1),H={class:"disF"},M=b("span",null,"禁用|启用",-1),Q={class:"mar7"},R=V("禁用"),W=V("启用"),q={class:"disF"},B=b("span",null,"选择后台",-1),G={class:"mar7"},J=V("管理后台"),K=V("商户后台"),N={class:"tjglyFat checkssss pd"};f();const O=C(((e,l,a,o,d,t)=>{const i=_("el-button"),s=_("el-table-column"),n=_("el-switch"),r=_("el-table"),u=_("el-input"),c=_("el-radio"),p=_("young-dialog"),m=_("el-checkbox");return h(),v("div",g,[b("div",U,[b(i,{type:"primary",size:"small",plain:"",onClick:e.add},{default:C((()=>[F])),_:1},8,["onClick"])]),b(r,{data:e.tableData,style:{width:"100%"},size:"medium",height:"700",class:"tableHet"},{default:C((()=>[b(s,{prop:"autoid",label:"ID"}),b(s,{prop:"parent_role_id",label:"父角色ID"}),b(s,{prop:"role_name",label:"角色名称"}),b(s,{prop:"role_desc",label:"角色描述"}),b(s,{label:"不启用/启用"},{default:C((e=>[b(n,{modelValue:e.row.is_enable,"onUpdate:modelValue":l=>e.row.is_enable=l,"active-value":1,"inactive-value":0,"active-color":"#409EFF","inactive-color":"#909399",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),b(s,{label:"操作",width:"300"},{default:C((l=>[b(i,{onClick:a=>e.editInfo(l.row)},{default:C((()=>[E])),_:2},1032,["onClick"]),b(i,{onClick:a=>e.editPriority(l.row),type:"primary",plain:""},{default:C((()=>[x])),_:2},1032,["onClick"]),1!=+l.row.autoid?(h(),v(i,{key:0,type:"danger",onClick:a=>e.del(l.row)},{default:C((()=>[P])),_:2},1032,["onClick"])):y("",!0)])),_:1})])),_:1},8,["data"]),b(p,{width:"370px","is-add":e.isAddInfo,"is-edit":e.isEditInfo,onSure:e.sure,onClear:e.clear},{body:C((()=>[b("div",j,[b("div",D,[S,b(u,{modelValue:e.formInfo.role_name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.formInfo.role_name=l),class:"len"},null,8,["modelValue"])]),b("div",z,[L,b(u,{modelValue:e.formInfo.role_desc,"onUpdate:modelValue":l[2]||(l[2]=l=>e.formInfo.role_desc=l),class:"len"},null,8,["modelValue"])]),b("div",A,[Y,b(u,{modelValue:e.formInfo.parent_role_id,"onUpdate:modelValue":l[3]||(l[3]=l=>e.formInfo.parent_role_id=l),modelModifiers:{number:!0},disabled:e.isEditInfo,class:"len"},null,8,["modelValue","disabled"])]),b("div",H,[M,b("div",Q,[b(c,{modelValue:e.formInfo.is_enable,"onUpdate:modelValue":l[4]||(l[4]=l=>e.formInfo.is_enable=l),label:0},{default:C((()=>[R])),_:1},8,["modelValue"]),b(c,{modelValue:e.formInfo.is_enable,"onUpdate:modelValue":l[5]||(l[5]=l=>e.formInfo.is_enable=l),label:1},{default:C((()=>[W])),_:1},8,["modelValue"])])]),b("div",q,[B,b("div",G,[b(c,{modelValue:e.formInfo.platform_type,"onUpdate:modelValue":l[6]||(l[6]=l=>e.formInfo.platform_type=l),label:0},{default:C((()=>[J])),_:1},8,["modelValue"]),b(c,{modelValue:e.formInfo.platform_type,"onUpdate:modelValue":l[7]||(l[7]=l=>e.formInfo.platform_type=l),label:1},{default:C((()=>[K])),_:1},8,["modelValue"])])])])])),_:1},8,["is-add","is-edit","onSure","onClear"]),b(p,{width:"60vw",top:"10vh","is-edit":e.isEditPriority,onSure:e.surePriority,onClear:e.clear},{body:C((()=>[b("div",N,[b(r,{data:e.nodeList,style:{width:"100%","margin-bottom":"20px"},"row-key":"autoid","default-expand-all":!1,size:"medium","tree-props":{children:"part",hasChildren:"hasChildren"}},{default:C((()=>[b(s,{prop:"node_name",label:"节点名称",width:"240"},{default:C((l=>[b(m,{modelValue:l.row.is_checked,"onUpdate:modelValue":e=>l.row.is_checked=e,onChange:a=>e.selectChange(l.row)},{default:C((()=>[V(w(l.row.node_name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),b(s,{prop:"autoid",label:"ID"}),b(s,{prop:"parent_id",label:"父节点"}),b(s,{prop:"node_path",label:"路径"}),b(s,{prop:"node_desc",label:"节点描述"}),b(s,{prop:"is_show",label:"隐藏/显示"},{default:C((e=>[b(n,{modelValue:e.row.is_show,"onUpdate:modelValue":l=>e.row.is_show=l,"active-value":1,"inactive-value":0,"active-color":"#409EFF","inactive-color":"#909399",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),b(s,{prop:"node_type",label:"节点级别"})])),_:1},8,["data"])])])),_:1},8,["is-edit","onSure","onClear"])])}));k.render=O,k.__scopeId="data-v-002a6fe6";export default k;
