function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function asyncGeneratorStep(e,n,t,r,a,o,l){try{var i=e[o](l),u=i.value}catch(d){return void t(d)}i.done?n(u):Promise.resolve(u).then(r,a)}function _asyncToGenerator(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function l(e){asyncGeneratorStep(o,r,a,l,i,"next",e)}function i(e){asyncGeneratorStep(o,r,a,l,i,"throw",e)}l(void 0)}))}}var __vite_style__=document.createElement("style");__vite_style__.innerHTML=".index .tjglyFat .disF[data-v-15e4ada8]{margin-bottom:10px;display:flex}.index .tjglyFat .disF>span[data-v-15e4ada8]{width:80px;min-width:80px;line-height:32px;text-align:right;margin-right:15px}.index .tjglyFat .disF .switchTop[data-v-15e4ada8]{margin-top:6px}.index .tjglyFat .el-input__suffix-inner[data-v-15e4ada8]{margin-right:0!important}.index .tjglyFat .mar7[data-v-15e4ada8]{margin-top:7px}.checkssss .el-checkbox__label[data-v-15e4ada8]{color:#606266!important}.len[data-v-15e4ada8]{width:220px}.pd[data-v-15e4ada8]{height:60vh;overflow:auto}",document.head.appendChild(__vite_style__),System.register(["./vendor-legacy.76bc921b.js","./system-legacy.1a983055.js","./index-legacy.7f485195.js"],(function(e){"use strict";var n,t,r,a,o,l,i,u,d,c,s,f,p,m,_,v,y,h,b,g,w,x;return{setters:[function(e){n=e.d,t=e.f,r=e.D,a=e.V,o=e.y,l=e.p,i=e.a,u=e.g,d=e.o,c=e.c,s=e.b,f=e.u,p=e.m,m=e.i,_=e.w},function(e){v=e.b,y=e.c,h=e.f,b=e.h,g=e.i},function(e){w=e._,x=e.d}],execute:function(){var k=e("default",n({name:"Role",components:{YoungDialog:w},setup:function(){var e=t({autoid:0,role_name:"",role_desc:"",parent_role_id:0,is_enable:1,platform_type:0,role_access:""}),n=t([]),l=t([]),i=t(!1),u=t(!1),d=t(!1),c=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:t=e.sent,n.value=x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r((function(){return c()}));var s=function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.value=!0;case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var n=_asyncToGenerator(regeneratorRuntime.mark((function n(t){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y(t.autoid);case 2:return r=n.sent,n.next=5,r.nodeList;case 5:(a=n.sent).forEach((function(e){e.is_checked&&(e.is_checked=!0),_(e,!0)})),l.value=x(a),e.value=t,d.value=!0;case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),p=function(){i.value=!1,u.value=!1,d.value=!1,e.value={autoid:0,role_name:"",role_desc:"",role_access:"",parent_role_id:0,is_enable:1,platform_type:0},n.value=[],c()},m=function(){var n=_asyncToGenerator(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i.value){n.next=6;break}return n.next=3,b(e.value);case 3:o.success("角色添加成功！"),n.next=9;break;case 6:return n.next=8,g(e.value);case 8:o.success("角色修改成功！");case 9:p();case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),_=function e(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];0!==n.part.length&&n.part.forEach((function(r){t?r.is_checked?r.is_checked=!0:r.is_checked=!1:n.is_checked?r.is_checked=!0:r.is_checked=!1,e(r,t)}))},w=function e(n,t){0!==n.length&&n.forEach((function(n){n.is_checked&&t.add(n.autoid),e(n.part,t)}))};return{tableData:n,nodeList:l,formInfo:e,isAddInfo:i,isEditInfo:u,isEditPriority:d,add:s,editInfo:function(n){e.value=n,u.value=!0},editPriority:f,del:function(e){a.confirm("确认删除该角色？","提示",{type:"warning"}).then(_asyncToGenerator(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h(e.autoid);case 2:o.success("删除成功！"),c();case 4:case"end":return n.stop()}}),n)})))).catch((function(){return null}))},sure:m,clear:p,selectChange:_,surePriority:function(){var n=new Set;w(l.value,n),e.value.role_access=_toConsumableArray(n).join(","),m()}}}})),V=_();l("data-v-15e4ada8");var I={class:"index"},C={class:"caozuoFat"},F=p("添加角色"),A=p("信息编辑"),T=p("权限编辑"),S=p("删除"),j={class:"tjglyFat"},U={class:"disF"},E=s("span",null,"角色名称",-1),R={class:"disF"},G=s("span",null,"角色描述",-1),L={class:"disF"},P=s("span",null,"父级角色id",-1),D={class:"disF"},z=s("span",null,"禁用|启用",-1),H={class:"mar7"},M=p("禁用"),O=p("启用"),W={class:"disF"},Y=s("span",null,"选择后台",-1),$={class:"mar7"},q=p("管理后台"),B=p("商户后台"),J={class:"tjglyFat checkssss pd"};i();var K=V((function(e,n,t,r,a,o){var l=u("el-button"),i=u("el-table-column"),_=u("el-switch"),v=u("el-table"),y=u("el-input"),h=u("el-radio"),b=u("young-dialog"),g=u("el-checkbox");return d(),c("div",I,[s("div",C,[s(l,{type:"primary",size:"small",plain:"",onClick:e.add},{default:V((function(){return[F]})),_:1},8,["onClick"])]),f(" 角色列表 "),s(v,{data:e.tableData,style:{width:"100%"},size:"medium",height:"700",class:"tableHet"},{default:V((function(){return[s(i,{prop:"autoid",label:"ID"}),s(i,{prop:"parent_role_id",label:"父角色ID"}),s(i,{prop:"role_name",label:"角色名称"}),s(i,{prop:"role_desc",label:"角色描述"}),s(i,{label:"不启用/启用"},{default:V((function(e){return[s(_,{modelValue:e.row.is_enable,"onUpdate:modelValue":function(n){return e.row.is_enable=n},"active-value":1,"inactive-value":0,"active-color":"#409EFF","inactive-color":"#909399",disabled:""},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),s(i,{label:"操作",width:"300"},{default:V((function(n){return[s(l,{onClick:function(t){return e.editInfo(n.row)}},{default:V((function(){return[A]})),_:2},1032,["onClick"]),s(l,{onClick:function(t){return e.editPriority(n.row)},type:"primary",plain:""},{default:V((function(){return[T]})),_:2},1032,["onClick"]),1!=+n.row.autoid?(d(),c(l,{key:0,type:"danger",onClick:function(t){return e.del(n.row)}},{default:V((function(){return[S]})),_:2},1032,["onClick"])):f("v-if",!0)]})),_:1})]})),_:1},8,["data"]),f(" 信息 添加 | 编辑 "),s(b,{width:"370px","is-add":e.isAddInfo,"is-edit":e.isEditInfo,onSure:e.sure,onClear:e.clear},{body:V((function(){return[s("div",j,[s("div",U,[E,s(y,{modelValue:e.formInfo.role_name,"onUpdate:modelValue":n[1]||(n[1]=function(n){return e.formInfo.role_name=n}),class:"len"},null,8,["modelValue"])]),s("div",R,[G,s(y,{modelValue:e.formInfo.role_desc,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.formInfo.role_desc=n}),class:"len"},null,8,["modelValue"])]),s("div",L,[P,s(y,{modelValue:e.formInfo.parent_role_id,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.formInfo.parent_role_id=n}),modelModifiers:{number:!0},disabled:e.isEditInfo,class:"len"},null,8,["modelValue","disabled"])]),s("div",D,[z,s("div",H,[s(h,{modelValue:e.formInfo.is_enable,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.formInfo.is_enable=n}),label:0},{default:V((function(){return[M]})),_:1},8,["modelValue"]),s(h,{modelValue:e.formInfo.is_enable,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.formInfo.is_enable=n}),label:1},{default:V((function(){return[O]})),_:1},8,["modelValue"])])]),s("div",W,[Y,s("div",$,[s(h,{modelValue:e.formInfo.platform_type,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.formInfo.platform_type=n}),label:0},{default:V((function(){return[q]})),_:1},8,["modelValue"]),s(h,{modelValue:e.formInfo.platform_type,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.formInfo.platform_type=n}),label:1},{default:V((function(){return[B]})),_:1},8,["modelValue"])])])])]})),_:1},8,["is-add","is-edit","onSure","onClear"]),f(" 权限编辑 "),s(b,{width:"60vw",top:"10vh","is-edit":e.isEditPriority,onSure:e.surePriority,onClear:e.clear},{body:V((function(){return[s("div",J,[s(v,{data:e.nodeList,style:{width:"100%","margin-bottom":"20px"},"row-key":"autoid","default-expand-all":!1,size:"medium","tree-props":{children:"part",hasChildren:"hasChildren"}},{default:V((function(){return[s(i,{prop:"node_name",label:"节点名称",width:"240"},{default:V((function(n){return[s(g,{modelValue:n.row.is_checked,"onUpdate:modelValue":function(e){return n.row.is_checked=e},onChange:function(t){return e.selectChange(n.row)}},{default:V((function(){return[p(m(n.row.node_name),1)]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),s(i,{prop:"autoid",label:"ID"}),s(i,{prop:"parent_id",label:"父节点"}),s(i,{prop:"node_path",label:"路径"}),s(i,{prop:"node_desc",label:"节点描述"}),s(i,{prop:"is_show",label:"隐藏/显示"},{default:V((function(e){return[s(_,{modelValue:e.row.is_show,"onUpdate:modelValue":function(n){return e.row.is_show=n},"active-value":1,"inactive-value":0,"active-color":"#409EFF","inactive-color":"#909399",disabled:""},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),s(i,{prop:"node_type",label:"节点级别"})]})),_:1},8,["data"])])]})),_:1},8,["is-edit","onSure","onClear"])])}));k.render=K,k.__scopeId="data-v-15e4ada8"}}}));
