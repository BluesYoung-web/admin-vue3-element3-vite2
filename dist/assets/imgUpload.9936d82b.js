import{d as e,f as l,g as a,o as t,c as r,x as o,b as i,l as u,q as s,k as n,h as d,i as c,S as p,Y as m,s as v}from"./vendor.01d1481d.js";import{u as f}from"./index.40da5c4d.js";const h={class:"w-300px"},y=s("上传"),V={class:"flex flex-wrap"};var g=e({props:{modelValue:{type:Array,required:!0},showUpload:{type:Boolean,required:!1,default:!0},limit:{type:Number,required:!1,default:10},params:{type:Object,required:!1,default:()=>({})},hideDel:{type:Boolean,required:!1}},emits:["update:modelValue","did"],setup(e,{emit:m}){const v=e,g=l(!1),x=l(null),w=[],k=e=>{var l;const a=null!=(l=e.target.files)?l:[],t=v.modelValue.length;if(t+a.length>v.limit)return m("update:modelValue",v.modelValue.concat(Array.from(a).slice(0,v.limit-t).map((e=>(w.push(e),URL.createObjectURL(e)))))),void p.warning(`最多只能上传${v.limit}张`);m("update:modelValue",v.modelValue.concat(Array.from(a).map((e=>(w.push(e),URL.createObjectURL(e))))))},b=()=>{!g.value&&x.value.addEventListener("change",k)&&(g.value=!0),x.value.click()},U=()=>{return e=this,l=null,a=function*(){const e=new FormData;w.forEach(((l,a)=>e.append("img"+a,l)));const l=yield f(v.params,e);m("did",l)},new Promise(((t,r)=>{var o=e=>{try{u(a.next(e))}catch(l){r(l)}},i=e=>{try{u(a.throw(e))}catch(l){r(l)}},u=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,i);u((a=a.apply(e,l)).next())}));var e,l,a};return(l,p)=>{const f=a("el-button"),g=a("el-image");return t(),r(d,null,[o(" 图片上传组件 "),i("div",h,[i("input",{ref:x,type:"file",accept:"image/*",name:"img",multiple:e.limit>1,hidden:""},null,8,["multiple"]),i("div",null,[e.showUpload?(t(),r(f,{key:0,type:"primary",icon:"el-icon-picture",disabled:e.modelValue.length>=10,onClick:b},{default:u((()=>[s(" 点击选取图片（不超过"+n(e.limit)+"张） ",1)])),_:1},8,["disabled"])):o("v-if",!0),i(f,{type:"success",icon:"el-icon-upload",onClick:U},{default:u((()=>[y])),_:1})]),i("div",V,[(t(!0),r(d,null,c(e.modelValue,((l,a)=>(t(),r("div",{key:l+"9527"+a,class:"relative"},[i(g,{src:l,"preview-src-list":e.modelValue,lazy:"",class:"w-50px h-50px mr-5px mt-5px"},null,8,["src","preview-src-list"]),e.hideDel?o("v-if",!0):(t(),r(f,{key:0,icon:"el-icon-delete",type:"danger",circle:"",class:"absolute transform scale-65 right-0",onClick:e=>(e=>{const l=v.modelValue.indexOf(e);w.splice(l,1),v.modelValue.splice(l,1),m("update:modelValue",v.modelValue)})(l)},null,8,["onClick"]))])))),128))])])],2112)}}});const x=s("来了老弟");var w=e({setup(e){const a=l([]),o=l([]);for(let l=0;l<10;l++)o.value.push({top:100+Math.floor(600*Math.random()),start:1700+Math.floor(3e3*Math.random()),color:"gray"});return(e,l)=>{const u=m("pin");return t(),r(d,null,[(t(!0),r(d,null,c(o.value,((e,l)=>(t(),r("div",{key:l},[v(i("h1",null,[x],512),[[u,e]])])))),128)),i(g,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e)},null,8,["modelValue"])],64)}}});export default w;
